2015-01-14  Aubrey Jaffer  <jaffer@dv7t>

	* Makefile (VERSION): Bumped from 2b2 to 2b3.

2014-12-25  Aubrey Jaffer  <jaffer@dv7>

	* scm2c, scm2cs, scm2java: Minor translator corrections.

2013-12-01  Aubrey Jaffer  <jaffer@dv7>

	* scm2c, segs.scm (bytes-length): The only 2 translated calls are
	in segs.scm.  Translate them to strlen().

	* c/segs.c, segs.scm: db-version-str and db-authors-str are
	strings, not bytes.

2013-05-13  Aubrey Jaffer  <jaffer@dv7>

	* c/Makefile: -lpthread must be after linked files.

2013-05-08  Aubrey Jaffer  <jaffer@dv7>

	* Makefile (VERSION): Bumped from 2b1 to 2b2.

	* Makefile (CITERS): Fixed FreeSnell.texi path.

2012-04-10  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (upgnu): Added target to upload to ftp.gnu.org.

2011-12-14  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (html/wb, $(DESTDIR)$(htmldir)wb): HTML generated by
	`makeinfo --html'.

2011-10-25  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (snapdir, infodir, htmldir): Added defaults so make
	works with empty "config.status".

2011-09-05  Aubrey Jaffer  <agj@alum.mit.edu>

	* segs.scm (free-seg!): Collected deallocation code from new-seg
	and close-seg.

2011-09-04  Aubrey Jaffer  <agj@alum.mit.edu>

	* segs.scm (new-seg, make-seg): Copy filename argument.
	(close-seg): Free filename.

2011-06-08  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (dclean): Removes all derived files.

	* c/db.texi: Renamed from db.txi because this file isn't generated.

2011-06-06  Aubrey Jaffer  <agj@alum.mit.edu>

	* wb.texi, wb.info: Removed bt_open and bt_create in favor of
	open_db and create_db.

	* java/wb/Db.java, c/wbsys.c, c/wbsys.h, csharp/Han.cs,
	csharp/Seg.cs, db.scm, java/wb/Han.java, java/wb/Seg.java,
	wbsys.scm (make-hand): Renamed from han:make-han and make-han.

	* c/Makefile (all): Added.

	* c/wbscm.c (lflush_ents): Renamed from flush_ents.

	* c/db.c, c/db.h (create_db, open_db, flush_ents): Added.

	* c/wbcheck.c: Increased block-size to 16384.

2011-06-05  Aubrey Jaffer  <agj@alum.mit.edu>

	* segs.scm (init-wb, final-wb): Moved from "ents.scm".

	* handle.scm (Legacy API) : Cleaned NOTPRES table.

2011-06-04  Aubrey Jaffer  <agj@alum.mit.edu>

	* c/blkio.c, c/schleprt.c, c/schleprt.h, c/wbsys.c, c/wbsys.h:
	ANSIfied function headers.

	* Makefile (ahfiles): Renamed from hfiles.

2011-06-03  Aubrey Jaffer  <agj@alum.mit.edu>

	* scm2c (schlep-ansi-arglist): Make ANSI function headers if __STDC__.

2010-12-15  Aubrey Jaffer  <agj@alum.mit.edu>

	* c/blkio.c (blkio_create_file, blkio_open_modify_file): Fixed for
	MinGW build.

2010-10-27  Aubrey Jaffer  <agj@alum.mit.edu>

	* scm2c: Handle #! first line.
	Handle multidimensional array access.
	(STRING-CI=?, UNIFORM-ARRAY-READ!): Added.
	Added transcendental functions.

	* scm2cs: Handle #! first line.
	Handle multidimensional array access.
	(DECLARE-NAMES): Corrected from DECLARE-SUFFIXES.
	(logbit?): Fixed.

	* scm2java: Handle #! first line.
	Handle multidimensional array access.
	Don't output package statement if package not specified.
	(logbit?): Fixed.

	* java/Makefile ($(classfiles)): Compile from here; trampoline
	doesn't work.

2010-07-30  Aubrey Jaffer  <agj@alum.mit.edu>

	* c/wbscm.c: Renamed from "db.c".

2010-06-29  Aubrey Jaffer  <jaffer@dv7>

	* Makefile (VERSION): Bumped from 2a3 to 2b1.

2010-06-19  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile: INSTALL_INFO = ginstall-info

2010-06-05  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (clean, distclean): .o and .so files are in c/.

	* c/Makefile (CFLAGS): Ubuntu needs -fPIC.

2010-06-02  Aubrey Jaffer  <agj@alum.mit.edu>

	* configure: Improved portability of trailing / detection.

2010-05-22  Aubrey Jaffer  <agj@alum.mit.edu>

	* configure (ac_default_prefix): Was lacking trailing /.

2010-04-27  Aubrey Jaffer  <agj@alum.mit.edu>

	* limitest.scm: Tests 99 open segments and final-wb.

	* ents.scm (final-wb): Removed extra lock/unlock of seg-chain-lck
	which was causing a spin-lock.

2010-04-21  Aubrey Jaffer  <agj@alum.mit.edu>

	* ents.scm (ents:ent-write, amnesia-ent!, blk-free): Bummed code.

	* c/blkio.c (blkio_read, blkio_write): Beefed up error checking.
	(blkio_init, blkio_final): _set_invalid_parameter_handler.

2010-04-15  Aubrey Jaffer  <agj@alum.mit.edu>

	* c/blkio.c: Compiled with MSVS-2008 croaks without L after -1.

2010-04-13  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (cdeliverables): Removed "c/wbscm.so".
	(version.txi): Include in distribution.
	(temp/wb): Fixed java directories.

	* ents.scm (final-wb): Multiple calls not an error.

2010-04-12  Aubrey Jaffer  <agj@alum.mit.edu>

	* c/blkio.c (blkio_file_close): _MSC_VER must seek before unlock.

2010-04-10  Aubrey Jaffer  <agj@alum.mit.edu>

	* c/blkio.c (blkio_create_file, blkio_open_modify_file)
	(blkio_file_close, blkio_read, blkio_write, blkio_file_extend):
	Bracketed dprintf()s (which expand to two statements).

2010-04-09  Aubrey Jaffer  <agj@alum.mit.edu>

	* c/blkio.c: Output errno error message for system calls.

2010-03-16  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile, java/Makefile: Java files moved to java/wb/ subdirectory.

2010-03-12  Aubrey Jaffer  <agj@alum.mit.edu>

	* handle.scm (han-error?): Added.
	(bt-get, bt-next, bt-prev, bt-rem, bt-put, bt-write): Check `han'
	argument.
	* scan.scm (bt-scan): Check `han' argument.

2010-03-11  Aubrey Jaffer  <agj@alum.mit.edu>

	* segs.scm (open-segd): Improved "uncleanly saved" message.
	(close-seg): Moved seg-chain-lck stuff out; close-segd merged.
	(bt-create): Fail gracefully for null seg or han arguments.
	(bt-close): Fail gracefully for null han argument.

2010-03-10  Aubrey Jaffer  <agj@alum.mit.edu>

	* c/wbcheck.c (main): Open mutable only if blkgc.

	* csharp/.cvsignore, c/.cvsignore: Added.

2010-02-23  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (Makefile): Runs ./configure to create config.status.

2010-02-22  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (SCM2JAVA, SCM2CS, SCM2C): Invoke scm explicitly,
	rather than running script.

2010-02-20  Aubrey Jaffer  <agj@alum.mit.edu>

	* java/Test.java, csharp/Test.cs: Handle file-not-found.

	* java/TestMT.java, csharp/TestMT.cs: Test opening non-existant file.

	* java/Blkio.java, csharp/Blkio.cs (blkio_CreateFile)
	(blkio_OpenModifyFile, blkio_OpenReadOnlyFile): Catch and return
	null for failure.

2010-02-13  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile: Reorganized per <http://www.gnu.org/prep/standards/>.

2010-02-04  Aubrey Jaffer  <agj@alum.mit.edu>

	* configure: GNU-style configuration for installation creates
	config.status, which is included by Makefile.

2010-01-25  Aubrey Jaffer  <agj@alum.mit.edu>

	* blink.scm (set-field): Fixed C# build (not sure why).

2010-01-21  Aubrey Jaffer  <agj@alum.mit.edu>

	* segs.scm (new-seg): Don't spin on seg-chain.

	* c/db.c (init_wbscm): Added alias for init_db().

	* example.scm (seg2): Make second (empty) file.

	* all.scm: Added (provide 'wb).

	* Makefile (check): Run "example.scm" using "c/wbscm.so".
	Put "make cscheck" last so its failure doesn't foil other tests.

2010-01-11  Aubrey Jaffer  <agj@alum.mit.edu>

	* segs.scm (open-segd): Output warning about unclean save, even if
	overriding.

	* java/TestMT.java, csharp/TestMT.cs: Creates minimal WB-tree file.

	* csharp/Blkio.cs (blkio_FileClose): Output error message if file
	can't be unlocked.

	* java/Blkio.java (blkio_CreateFile, blkio_OpenModifyFile):
	Changed mode-string to "rws", synchronous write-through.
	(blkio_CreateFile): Set file-length to 0.

2009-12-22  Aubrey Jaffer  <agj@alum.mit.edu>

	* csharp/Db.cs (bt_Scan): Removed (now in "db.scm").

	* wb.texi (C# Legacy API, Java Legacy API): From "Handle.txi" and
	"Scan.txi".
	(Java HANDs and Tree Operations, C# HANDs and Tree Operations):
	Now holds documentation of "Db.txi" interfaces.

	* db.scm (bt:scan): Added version for C# and Java.
	Added schmooz comments.

	* scm2java, scm2cs, scm2c (out-schlep-comment): Don't echo schmooz
	output in source comments.

	* db.scm, csharp/Db.cs (createDb, openDb): Added char and string
	argument variants.

2009-12-21  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile, csharp/Db.cs, csharp/Makefile, db.scm, java/Db.java,
	java/Makefile, scm2cs.typ, scm2java.typ: "db.scm" is now a source
	for translation.  Java string overloads for Db put in pragma.java
	in "db.scm".  "Db.cs" has C# string overloads.

	* java/Example.java (createDb): Updated calls to.

	* csharp/SchlepRT.cs, java/SchlepRT.java (subArray): Removed.
	(subbytes): Added.

	* schleprt.scm (pragma.java): Added stub.

	* csharp/TestA.cs: Updated.

	* csharp/Test.cs: Minimized use of a2b.

	* csharp/Han.cs, java/Han.java (han_MakeHan): Renamed from hanMakeHan.

2009-12-20  Aubrey Jaffer  <agj@alum.mit.edu>

	* c/db.c (lcreate_db): Handle error creating btree.

	* scm2java.typ, scm2cs.typ: (blk:*, parent-insert-update,
	bt-open-new, ents:*, *ent-copy): Changed to boolean return type.

	* ents.scm (ents-flush): Fail with 0, not #f.
	(flush-ent-cntr, free-ents, flc-fill): Initialize to 0, not #f.

	* blink.scm (blk:insert-and-adjust, blk:simple-insert)
	(blk:change-existing-value): "blk:" prepended to name to make
	boolean return type.
	(dummy-leaf-split, split-key-pos, blk:find-pos, find-ent): Return
	0, not #f.

	* stats.scm: Initialize counts to 0, not #f.

	* segs.scm (close-segd): Return NOTPRES if segment already closed.

	* scm2java, scm2cs (schlep-exp): Don't ever translate #f to 0.

2009-12-18  Aubrey Jaffer  <agj@alum.mit.edu>

	* c/db.c: Handle #f key arguments as "".

	* segs.scm (new-seg): Added filename argument.

	* ents.scm (init-wb): Check arguments.

2009-12-17  Aubrey Jaffer  <agj@alum.mit.edu>

	* handle.scm (key-error?): Pass in name of caller for message.

2009-12-16  Aubrey Jaffer  <agj@alum.mit.edu>

	* scan.scm (bt-scan): Calls KEY-ERROR? to validate arguments.

	* csharp/Blkio.cs: Tightened FileModes and critical locking.

	* handle.scm (key-error?): Added; used by all API functions.

	* wbdefs.scm (KEYERR): Added.

	* blink.scm (reroot!): Remove superfluous BLK:SET-ID!.

	* Makefile (scmfiles): Added schleprt.scm.

2009-12-12  Aubrey Jaffer  <agj@alum.mit.edu>

	* scm2c: Improved documentation.

	* scm2cs, scm2java (prototype-style): Removed ignored feature.
	Improved documentation.

	* Makefile (java/Wbdefs.java): "-p constant" was being ignored.

	* c/schleprt.c, c/schleprt.h, schleprt.scm (subbytes-move*):
	Moved back to wbsys.

	* c/wbsys.c, c/wbsys.h, wbsys.scm (subbytes-move*):
	Moved back from schleprt.

	* scm2cs (schlep-exp): Parenthesize arguments to BYTES.

	* wbsys.scm: Extracted Schlep runtime support into "schleprt.scm".

	* c/wbsys.c, c/wbsys.h: Extracted Schlep RunTime support into
	c/schleprt.c and c/schleprt.h.

	* csharp/Test.cs, csharp/TestA.cs, java/Test.java (Main): Added
	call to finalWb.

2009-12-11  Aubrey Jaffer  <agj@alum.mit.edu>

	* test.scm (rmain): Added call to final-wb.

2009-12-02  Aubrey Jaffer  <agj@alum.mit.edu>

	* csharp/Blkio.cs, java/Blkio.java (blkio_Final): Added.

	* ents.scm (final-wb): Added call: (blkio:final!).

	* csharp/Blkio.cs, csharp/Db.cs, csharp/SchlepRT.cs,
	csharp/Test.cs, csharp/Utils.cs: License cleanup.

	* csharp/Blk.cs, csharp/Cssys.cs, csharp/Ent.cs, csharp/Han.cs,
	csharp/Lck.cs, csharp/Pkt.cs, csharp/Seg.cs, csharp/Makefile,
	Makefile: Split up Cssys.cs into smaller files, like in ../java/.

	* ents.scm (init-wb): Now calls blkio:init!.

2009-12-01  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (install-scm, myinstalls): Added.

	* c/blkio.c (blkio_read, blkio_write): Moved definitions out of
	CriticalSection for _MSC_VER code.

	* csharp/Blkio.cs: Added documentation URLs.
	(blkio_Read, blkio_Write): Added lock around Position and.

	* c/wbcheck.c (main): Open file with warning if saved uncleanly.
	(wbcheck_usage): Added.

	* wbsys.scm (SEG:MUTABLE?): Had wrong polarity!

	* segs.scm (close-segd): CLN flag has empty value.

	* ents.scm (ents:ent-write): Use "SEG:MUTABLE?".

	* c/Makefile (install): Added target.

	* Makefile (install): Split into installc, installdll, installjar.

2009-11-30  Aubrey Jaffer  <agj@alum.mit.edu>

	* c/blkio.c (blkio_init, blkio_read, blkio_write): Added
	CriticalSection gate for _MSC_VER.

2009-11-29  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (temp/wb): Files were missing.

	* Makefile, csharp/Blkio.cs, csharp/Cssys.cs, csharp/Db.cs,
	csharp/Makefile: These changes seem to work, but the the "z"
	created by C# doesn't pass wbcheck.

	* Makefile, blkio.scm, c/blkio.c, c/blkio.h, c/ents.c, c/segs.c,
	ents.scm, java/Blkio.java, java/Ents.java, java/Seg.java,
	java/Segs.java, scm2cs, scm2java, segs.scm: Finished BLKIO file
	locking.

2009-11-28  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile, blkio.scm, c/Makefile, c/blkio.c, c/blkio.h, c/segs.c,
	c/wbsys.h, csharp/Blkio.cs, java/Blkio.java, java/Segs.java,
	java/Wbsys.java, segs.scm, wbsys.scm (blkio:port-open?):
	Added to complete BLKIO abstraction barrier.
	Progress in rewritting BLKIO files to lock files and be thread safe.

	* c/schleprt.h, csharp/SchlepRT.cs, java/SchlepRT.java:
	Scheme-i/o support procedures (not used by blkio) for Schlep.

	* java/Blkio.java: Now thread-safe (I think).

	* Makefile: */blkio.* are no longer translated files.

2009-11-23  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile, csharp/Makefile, csharp/Utils.cs:
	Blkio.* files are no longer translated.

	* csharp/Blkio.cs: No longer translated from "blkio.scm".

	* blkio.scm, c/segs.c, java/Segs.java, segs.scm,
	wbsys.scm (check-file?): Use blkio:read.

2009-11-12  Aubrey Jaffer  <agj@alum.mit.edu>

	* blkio.scm (io-diag?): Renamed from io-diag.

2009-11-09  Aubrey Jaffer  <agj@alum.mit.edu>

	* Moved routines from java/Wbsys.java into scm2java.
	Moved routine from csharp/Utils.cs into scm2cs.

2009-11-08  Aubrey Jaffer  <agj@alum.mit.edu>

	* scm2cs, scm2java (current-time, string->number, atoll, atof):
	Inlined.

	* scm2c (schlep-exp): Code cleanup.

2009-11-06  Aubrey Jaffer  <agj@alum.mit.edu>

	* scm2c: Improved Schlep documentation.  Mostly reconciled with
	Water version.

	* scm2cs, scm2java: Improved Schlep documentation.  Completely
	reconciled with Water version.

2009-11-05  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (SCM2C): Renamed from SCHLEP.

2009-11-04  Aubrey Jaffer  <agj@alum.mit.edu>

	* scm2c, scm2cs, scm2java (schlep.script): Return #t for --help.
	Updated documentation.

	* scm2c, scm2c.typ: Renamed from schlep, schlep.typ.

2009-09-18  Aubrey Jaffer  <agj@alum.mit.edu>

	* blink.scm, c/blink.c, java/Blink.java (short2str!, str2short,
	long2str!, str2long): Recoded to use logical operations instead of
	quotient and modulo.

	* blkio.scm, schlep.typ, scm2cs.typ, scm2java.typ, c/blkio.c,
	c/blkio.h, java/Blkio.java: Widened file-position to 64 bit.

2009-08-19  Aubrey Jaffer  <agj@alum.mit.edu>

	* ANNOUNCE: Added table of library sizes.

2009-08-02  Aubrey Jaffer  <jaffer@localhost.localdomain>

	* Makefile (VERSION): Bumped from 2a2 to 2a3.

2009-08-01  Aubrey Jaffer  <agj@alum.mit.edu>

	* scm2cs (schlep-let): Named let becomes just label; not while(true).

2009-06-05  Aubrey Jaffer  <agj@alum.mit.edu>

	* ents.scm, segs.scm: Reorganized lck numbering.

	* ents.scm (final-wb): Close segs before freeing ents.

	* benchmark.scm: Updated; changed to test creating 100 segs.

	* wbview (wbview): Fixed (had gone stale).

	* c/db.c (han:id): Added.

2009-06-03  Aubrey Jaffer  <agj@alum.mit.edu>

	* segs.scm (make-seg): Fail if bt-open-new fails.
	(bt-open-new): Make repeated calls to try-get-free-ent rather than
	one call to get-free-free-ent.  Fixes bug opening many segments.

2009-05-29  Aubrey Jaffer  <agj@alum.mit.edu>

	* java/Lck.java: Supplied missing '\n's in error messages.

	* scm2java (schlep-or): Improvements from Water.

2009-05-20  Aubrey Jaffer  <agj@alum.mit.edu>

	* c/db.c, c/segs.c, java/Segs.java, segs.scm (open-seg): Don't
	leave uninitialized seg in seg-chain when open-seg fails.

2009-04-14  Aubrey Jaffer  <agj@alum.mit.edu>

	* c/db.c, c/ents.c, c/segs.c, c/wbsys.c, c/wbsys.h, ents.scm,
	java/Ents.java, java/Segs.java, segs.scm: LCK cleanup.

2009-04-13  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (install): Fixed wbscm.so link.

2009-04-08  Aubrey Jaffer  <agj@alum.mit.edu>

	* c/wbsys.c, c/wbsys.h (_MSC_VER): Made 'lck's block own thread.

	* java/Lck.java, csharp/Cssys.cs: Made 'lck's self-blocking.

	* ents.scm (init-wb): Added check that 'lck's are self-blocking.

2009-02-27  Aubrey Jaffer  <agj@alum.mit.edu>

	* ents.c, segs.c, wbsys.c, wbsys.h: Locks are pthread_mutex on
	unix; Windows mutex in MSVC.

	* c: Moved C source, objects, and programs into c subdirectory.

	* wb.spec (Source): Update URL.

	* schlep (schlep1): Take optional destination directory as last arg.

2009-02-19  Aubrey Jaffer  <agj@alum.mit.edu>

	* wb.texi (Building from Scheme Sources): Updated URLs.

2008-12-04  author  <author@aubrey.jaffer>

	* schlep, scm2cs, scm2java: Using 'schlep' for all internal names
	eases porting improvements between compilers.

	* scm2java, java/*.java: Wrapped java '?' ifs with ().

2008-11-17  Aubrey Jaffer  <agj@alum.mit.edu>

	* csharp/Test.cs, csharp/TestA.cs: Fixed test files.

	* scm2cs.typ (namespace): is now "wb".

2008-11-12  Aubrey Jaffer  <agj@alum.mit.edu>

	* db.c (han:seg): Added.
	(lopen_bt): Fixed seg reference.

	* java/Ents.java, ents.c, ents.scm (init-wb): Return NOTPRES (-1)
	if already initialized.

	* ents.c, ents.scm, java/Ents.java, java/Segs.java, segs.c,
	segs.h, segs.scm, wb.info, wb.texi (init-wb): Don't err if called
	multiple times.

	* java/Example.java, java/Db.java: Commented out import which
	generates not-used warning.

2008-11-07  Aubrey Jaffer

	* (segtab): Eliminated; segs are now allocated objects.

2008-02-21  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (distclean): Delete $(deliverables).

	* wb.info, wb.texi (WCB-SAC): Not currently implemented.

	* Makefile (install): Added deliverables dependency.

	* java/Segs.java, java/Blink.java, java/Ents.java: Shuffled
	ent_SetDty() calls.

	* segs.c, blink.c, ents.c: Suffled ent_set_dty() calls.

	* blink.scm, ents.scm, segs.scm: Shuffled ENT:SET-DTY! calls.

	* db.c (diagout): Moved assignent from ents.c.

	* ents.c, ents.scm (diagout): Moved assignent to db.c.

	* wbsys.h (dprintf): Condition of diagout; fflush().

2008-02-12  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (scheck): Separated Scheme-check from check target.

2008-02-11  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (scheck): Separated Scheme-check from check target.

	* schlep: Removed 1st line "%0 %*" for MS-DOS scripting.

2008-02-09  Aubrey Jaffer  <agj@alum.mit.edu>

	* test.scm, example.scm, csharp/Test.cs, java/Example.java: Don't
	close and reopen new segment.

	* rwb-isam.scm (make-base): Don't reopen new segment.
	(open-base, write-base): Open-seg takes boolean third argument.

	* Makefile (check): Fixed order to run interpreted first.

	* stats.scm: Removed unused java:import "BooleanMethods".

	* segs.scm (open-seg): Third argument is now boolean.
	(make-seg): Simplified using bt-open-new!.
	(bt-open-new!, bt-open-init-han!): Refactored code into.

	* ents.scm (empty-blk, empty-blk-lck): Removed.

2008-02-08  Aubrey Jaffer  <agj@alum.mit.edu>

	* ents.scm (flc-fill): Don't bother to init-leaf-blk!.

	* blkio.scm (blkio:file-extend): Removed unused blk argument.

	* java/Handle.java, java/Stats.java (cleverCacheEnable_P):
	Renamed from cleverCacheEnable.

	* stats.c, handle.c, handle.h (clever_cache_enable_P):
	Renamed from clever_cache_enable.

	* handle.scm, stats.scm (clever-cache-enable?):
	Renamed from clever-cache-enable.

	* csharp/Test.cs, csharp/TestA.cs, java/Example.java,
	java/Test.java, example.scm, test.scm: Close-seg after make-seg.

	* java/Segs.java, segs.scm (make-seg): Don't close-then-reopen;
	don't close; return seg.

	* wbsys.h (open_output_file): O_RDWR.

	* csharp/Utils.cs (openOutputFile): FileAccess.ReadWrite.

	* blkio.scm (blkio:create-file): SCM: (open-file name "w+").

	* scm2cs.typ, scm2java.typ (blkio:*): Corrected return types to
	boolean.

	* csharp/Utils.cs, java/Wbsys.java (filePosition, closePort):
	Corrected return types to boolean.

	* java/Blkio.java (blkio_FileExtend): Don't need to write block.
	(blkio_Read, blkio_Write): Corrected return types to boolean.

	* java/Blkio.java, blkio.c, blkio.scm (blkio:file-extend): Don't
	need to write block.

2008-02-01  Aubrey Jaffer  <jaffer@aubrey.jaffer>

	* Makefile (VERSION): Bumped from 2a1 to 2a2.

2008-01-31  Aubrey Jaffer  <agj@alum.mit.edu>

	* wb.spec, Makefile: Always put - between wb and version.

2008-01-30  Aubrey Jaffer  <agj@alum.mit.edu>

	* all.scm, java/Wbsys.java, java/Stats.java, java/Test.java,
	  java/Wbdefs.java, java/Scan.java, java/Seg.java, java/Segs.java,
	  java/Han.java, java/Handle.java, java/Lck.java, java/Pkt.java,
	  java/Prev.java, java/Del.java, java/Ent.java, java/Ents.java,
	  java/Example.java, java/Blk.java, java/Blkio.java, java/Db.java,
	  csharp/Test.cs, csharp/Utils.cs, java/Blink.java,
	  csharp/Cssys.cs, csharp/TestA.cs, wb.texi, wbview, wbsys.c,
	  wbsys.h, wbsys.scm, wb.info, wbdefs.h, wbdefs.scm, VMSBUILD.COM,
	  test.scm, test2.scm, wbcheck.c, scan.c, scan.scm, segs.scm,
	  stats.c, stats.scm, Makefile, README, handle.scm, prev.c,
	  prev.scm, ents.scm, example.scm, handle.c, ents.c, blink.scm,
	  blkio.c, blkio.scm, db.c, db.scm, del.c, del.scm, blink.c:
	Changed license to LGPL version 3.

2008-01-28  Aubrey Jaffer  <agj@alum.mit.edu>

	* wb.texi, wb.info, README (Description): WB is a GNU package.
	(GNU Free Documentation License): Moved to "Overview" chapter.

2008-01-24  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (docfiles): Added "fdl.texi".

	* wb.texi: Changed to "GNU Free Documentation License".

	* fdl.texi (GNU Free Documentation License): Added.

	* COPYING: "GNU GENERAL PUBLIC LICENSE" Version 3.

	* COPYING.LESSER: Added "GNU LESSER GENERAL PUBLIC LICENSE".

2008-01-19  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (install): test -d is not needed with mkdir -p.

2008-01-18  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (install): mkdir -p.

2008-01-16  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (RSYNC): --rsync-path no longer needed.

2008-01-15  Aubrey Jaffer  <agj@alum.mit.edu>

	* wbsys.h (max, min): #define only if not #defined.

2008-01-14  Aubrey Jaffer  <agj@alum.mit.edu>

	* wbsys.h: Ported to VC++2005 conditioned on #ifdef _MSC_VER.
	Supplied prototype for ent_make_ent().

2008-01-13  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (allfiles): Removed s2jfiles.

2008-01-10  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (wbcheck): Removed -lc.

2007-12-20  Aubrey Jaffer  <agj@alum.mit.edu>

	* wbsys.h: Conditionalized #include <unistd.h> for MSVC++2005.

2007-12-17  Aubrey Jaffer  <agj@alum.mit.edu>

	* java/Wbdefs.java, java/Blkio.java, java/Del.java,
	java/Ents.java, java/Handle.java, java/Prev.java, java/Scan.java,
	java/Segs.java, java/Stats.java java/Test.java, java/Blink.java,
	java/Blk.java, java/Db.java, java/Example.java, java/Seg.java:
	Removed unused static imports.

	* wbdefs.scm, del.scm, ents.scm, handle.scm, prev.scm, scan.scm,
	segs.scm, stats.scm, blink.scm, blkio.scm: Removed unused
	java:import classes.

	* java/Makefile (JAVAC): New versions of JDK require
	"javac -source 5" in order to allow static imports.

2007-11-26  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (temp/wb): Include csharp/Wb.dll and test files.

2007-11-23  Aubrey Jaffer  <jaffer@aubrey.jaffer>

	* Makefile (VERSION): Bumped from 1c3 to 2a1.

2007-11-06  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (srcdir.mk): Removed (schlep now in wb/).
	(trnfiles): Added translator files.
	(allfiles): Added $(trnfiles).
	(temp/wb): SCHLEP no longer needs special treatment.

2007-11-04  Aubrey Jaffer  <agj@alum.mit.edu>

	* java/Wbsys.java, blkio.c, blkio.scm, csharp/Utils.cs,
	java/Blkio.java, wbsys.h: file-set-position changed to
	file-position per SLIB change.

2007-10-25  Aubrey Jaffer  <agj@alum.mit.edu>

	* README, wb.info, wb.texi (Installation):
	Expanded description of SCM installation.

	* Makefile (txifiles): Added java/ and csharp/ files.

	* wb.info, wb.texi (C Compile-Time Parameters):
	Put in C Interface chapter.

2007-10-24  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (txifiles): Added java/ and csharp/ files.

	* wb.texi (C Compile-Time Parameters): Put in C Interface chapter.
	(Installation): Expanded description of SCM installation.

	* java/Example.java, java/Handle.java, java/Makefile,
	java/Prev.java, java/Scan.java, java/Stats.java, java/Test.java,
	java/Wbdefs.java, csharp/Makefile, java/Benchmark.java,
	java/Blink.java, java/Blkio.java, java/Db.java, java/Del.java,
	java/Ents.java, wb.info, wb.texi, wbdefs.scm, wbsys.h, Makefile,
	README, handle.scm, prev.scm, scan.scm, stats.scm, blkio.scm,
	del.scm, ents.scm, handle.c, handle.h, all.scm, blink.scm:
	"segs.scm" split from "handle.scm" so that documentation can be
	generated for 3 language interfaces.

	* java/Segs.java, segs.scm: Split from "handle.scm" so that
	documentation can be generated for 3 language interfaces.

2007-10-21  Aubrey Jaffer  <agj@alum.mit.edu>

	* README: Now generated automatically from wb.info.

	* wb.texi (License): Renamed from Copying; updated.
	(File Organization): Rewritten.
	(History, Description): Expanded and updated.

	* make.scm: Removed.

	* Makefile (all): Added wb.jar and Wb.dll.
	(csharp/Wb.dll): Replaced csall.
	(check): Check Java and C# also.
	(cscheck): Added.
	(README): Generate from wb.info.

	* csharp/Makefile (cscheck, Wb.cs): Targets added.

	* csharp/Utils.cs: Merged BooleanMethods.cs into.

2007-10-20  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (ssfiles): Subdirectory "scheme".

	* blink.scm, blkio.scm, del.scm, ents.scm, handle.scm, prev.scm,
	scan.scm, stats.scm wbsys.scm: Changed load of "wbdefs.scm" to
	defmacro:load.

	* all.scm: Added defmacro:load of "wbsys.scm".

	* db.scm: Removed load of "wbsys.scm".

	* scm2cs (scm2cs): Put out blank line between concatentated files.

	* csharp/Makefile (depends): Added dependencies for Wb.dll.

2007-10-14  Aubrey Jaffer  <agj@alum.mit.edu>

	* blkio.scm, del.scm, ents.scm, handle.scm, prev.scm, scan.scm,
	stats.scm, wbdefs.scm, blink.scm: Cleaned up includes to use
	java:import.

	* Makefile (check): Refactored all.scm.

	* scm2cs: Harmonized with Whitewater scm2cs.

	* scm2java (scm2java-top): Removed LOAD; renamed IMPORTJ to
	JAVA:IMPORT.

	* wbsys.scm (java:import): Added stub.

	* test.scm, test2.scm, all.scm: Corrected slib:load-source usage.

	* csharp/Makefile (Wb.dll): Renamed `lib' target.

	* db.scm (close-bt!): is just bt-close.

2007-10-10  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (sharedir, jardir): Added.
	(install): Install wb.jar and Wb.dll.

	* wbsys.h, wbsys.scm (make-pkt): Removed.

	* java/Del.java, java/Ents.java, java/Handle.java, java/Prev.java,
	java/Scan.java, handle.c, handle.scm, java/Blink.java, prev.c,
	prev.scm, scan.c, scan.scm, test2.scm, blink.c, blink.scm, db.scm,
	del.c, del.scm, ents.c, ents.scm:
	Calls to (make-pkt) replaced by (make-vector PKT-SIZE) so that Schlep
	allocates local storage.

2007-09-18  Aubrey Jaffer  <agj@alum.mit.edu>

	* scm2java (javafy-name): "Equal" instead of "Eql".

	* schlep (schlep-exp): Don't turn EQUAL? into ==.

2007-09-12  Aubrey Jaffer  <agj@alum.mit.edu>

	* scm2java (scm2java-exp): Eliminated double a2b around "!".

2007-09-11  Aubrey Jaffer  <agj@alum.mit.edu>

	* csharp/BooleanMethods.cs: Commented out unused types.

	* scm2cs: Made changes analogous to scm2java.

	* csharp/Lck.cs (tryLck_P): _P suffix added.

	* scm2java (bool-exp?): OR now assumed boolean.
	(scm2java-if): Pull all but last expression out of BEGIN test.
	(scm2java-or): Fixed precedence for || which was supplied by a2b.
	(scm2java-exp): Fixed called USE of numeric predicates.
	(bool-exp?): Handle nested IFs.

	* java/Wbdefs.java (getBukLck_P): _P suffix added.

	* java/Lck.java (tryLck_P): _P suffix added.

	* stats.h (buf_verbose_P): _P suffix added.

	* blink.h, blink.c (defer_insert_updates_P): _P suffix added.

	* wbdefs.h (get_buk_lck_P): Renamed from get_buk_lck.

	* wbdefs.scm (GET-BUK-LCK?): Renamed from GET-BUK-LCK.

	* wbsys.scm (try-lck?): Renamed from try-lck.

	* ents.scm (flc-fill): Replaced AND of SET! with BEGIN of SET!.

	* blink.scm (chain-put): Bad latent bug depending on value of set.

2007-09-10  Aubrey Jaffer  <agj@alum.mit.edu>

	* blink.scm (defer-insert-updates?): Renamed from
	defer-insert-updates.

	* del.c, del.h, stats.c (del_defer_block_deletes_P):
	Renamed from del_defer_block_deletes.

	* java/Blink.java, java/Del.java, java/Ents.java,
	java/Handle.java, java/Prev.java, java/Scan.java, java/Stats.java,
	java/Wbdefs.java: Removed more superfluous a2b calls.

	* scm2java (infix-test-scm2java-exp): Added for AND and OR.
	Removed more superfluous a2b calls.

2007-09-09  Aubrey Jaffer  <agj@alum.mit.edu>

	* Wbdefs.java, Blink.java, Blkio.java, Del.java, Ents.java,
	Handle.java, Prev.java, Scan.java, Stats.java: Improvements to
	scm2java eliminate many superfluous calls to a2b.

2007-09-08  Aubrey Jaffer  <agj@alum.mit.edu>

	* scm2java (scm2java-test, bool-exp?): Don't generate so many
	superfluous a2b calls.

	* del.scm (del:defer-block-deletes?): Appended "?" to boolean.

2007-09-07  Aubrey Jaffer  <agj@alum.mit.edu>

	* csharp/Test.cs, csharp/TestA.cs: Removed layer; wbcore --> wb.

	* csharp/Utils.cs: wbcore --> wb.

	* csharp/Makefile (lib, check): wbcore --> wb.

	* scm2cs.typ (*namespace-id*): Removed layer.
	(*class-name*, *cs-output-file-name*): wbcore --> wb.

	* Makefile (scsfiles): wbcore --> wb.

2007-09-03  Aubrey Jaffer  <agj@alum.mit.edu>

	* scm2java: Mostly harmonized with Water scm2java.

	* Makefile (install*): Added $(DESTDIR) prefixes.

2007-09-02  Aubrey Jaffer  <agj@alum.mit.edu>

	* schlep (schlep-body): Internal defined function needs extra
	brackets if it has internal defined variables.

2007-08-29  Aubrey Jaffer  <agj@alum.mit.edu>

	* db.scm (bt:rem!): Return boolean.

	* csharp/Db.cs (bt_Del): Return boolean.

	* java/Wbsys.java, java/Db.java: Code cleanup and reformatting.

	* java/BooleanMethods.java: Commented out unused type cases.

	* db.scm (bt:put): Return boolean.

2007-08-22  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (install): Put libwb.so and libwb.a in both $(libwbdir)
	and $(libdir).

	* schlep: Added usage section for Info.

2007-07-03  Aubrey Jaffer  <agj@alum.mit.edu>

	* schlep (schlep-exp): Fixed translation of recursion.

2007-06-15  Aubrey Jaffer  <agj@alum.mit.edu>

	* wb.texi (Segments, B-Trees): Editorial improvements.

	* csharp/Makefile (check): Combined test targets.

2007-06-14  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (csall): Formatted to fit in 80 columns.

2007-06-13  Aubrey Jaffer  <agj@alum.mit.edu>

	* wbdefs.scm: Added Schlep documentation for status codes.

	* wb.texi (File Organization): Renamed from Organization.
	(Compile-Time Parameters): Chapter added; 'Concepts' removed.
	(SCM Interface): Renamed from Scheme Interface.
	(B-Trees): Renamed from Associative Arrays.

2007-06-08  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (wb.info, temp/wb): Changed to use "mkdir -p".

2007-05-11  Aubrey Jaffer  <agj@alum.mit.edu>

	* scm2java.typ: *package-name*, not *namespace-id*.

	* schlep (out-include): Put newline after #include.

2007-05-11  Ravi kiran Gorrepati

	* Makefile, blink.scm, blkio.scm, del.scm, ents.scm, handle.scm,
	java/Example.java, prev.scm, scan.scm, scm2cs, scm2cs.typ,
	scm2java.typ, stats.scm: Modified #+/#- conditionals for C#.

2007-04-27  Ravi kiran Gorrepati

	* scm2cs: Scheme to C# translator.
	* scm2cs.typ: Type suggestion file.

2007-04-01  Aubrey Jaffer  <agj@alum.mit.edu>

	* schlep.typ: Prefixed declarations with *, now glob patterns.

	* schlep (declare-names!, declare-name!, read-local-declarations):
	Renamed from -suffix; declarations are now glob patterns.

2007-03-26  Aubrey Jaffer  <agj@alum.mit.edu>

	* wbview (byte): Require added.

2007-02-10  Aubrey Jaffer  <agj@alum.mit.edu>

	* scm2java (jprint): Fixed edprintf and wdprintf; added dprintf.
	Backported changes from Whitewater.

2007-02-06  Aubrey Jaffer  <agj@alum.mit.edu>

	* java/Db.java (wb_Err_P): Added.

2007-02-01  Aubrey Jaffer  <agj@alum.mit.edu>

	* scm2java (scm2java-exp): Removed a2b() from translation of ZERO?
	Changed character arguments to OUT to strings.

2007-01-31  Aubrey Jaffer  <agj@alum.mit.edu>

	* scm2java (scm2java-exp): Don't scm2java-goto if termin = ";".

	* java/Db.java, java/Wbsys.java:
	Changed to stringToBytes and bytesToString from stringToByts and
	bytsToString.  Indented and cleaned whitespace.

	* java/Handle.java, java/Wbdefs.java:
	Changed to stringToBytes from stringToByts.

	* scm2java (outbinding): Changed to stringToBytes from stringToByts.

2007-01-29  Aubrey Jaffer  <agj@alum.mit.edu>

	* scm2java (emit-package-name, emit-class-declaration): Added.

	* ents.scm (flc-fill): Use internal defined function to test
	scm2java.

	* scm2java (called-label?, add-label, label-vars): Added field to
	*label-list*.
	(scm2java-exp, scm2java-goto): Handle internal defined function.
	(brkify): Added; differentiate break labels from continue labels.

2007-01-26  Ravi kiran Gorrepati

	* java/Db.java, java/Handle.java, java/Wbdefs.java, java/Wbsys.java:
	Removed remnant stringToByts and bytsToString methods in Db.java.
	Renamed stringToBytes in scm2java to stringToByts.

	* java/Db.java, java/Handle.java, java/Wbdefs.java,
	java/Wbsys.java, scm2java: Replaced toBytes() method with
	stringToBytes() which uses "UTF-8" encoding.

2007-01-25  Ravi kiran Gorrepati

	* java/Prev.java, java/Blink.java, java/Blkio.java, java/Del.java,
	java/Ents.java, java/Handle.java:
	Slashify single-quote in strings.

	* scm2java (javafy-char): Slashify single-quote.
	(scm2java-exp): Supplied missing termin when returning inexact.
	Vector-length and bytes-length translate to length (unused).

	* java/Db.java, java/Wbsys.java:
	The Db interface now supports both strings and byte arrays.

2007-01-23  Aubrey Jaffer  <agj@alum.mit.edu>

	* java/Pkt.java, java/Seg.java, java/Test.java, java/Wbsys.java,
	java/Lck.java, java/Han.java, java/Ent.java, java/Example.java,
	java/Db.java, java/Blk.java, java/Benchmark.java:
	Added Clear Methods copyright notice.

	* java/BooleanMethods.java: Removed license from small file.

2007-01-23  Ravi kiran Gorrepati

	* scm2java: The translation from : to _ works now.

	* java/Blink.java, java/Blk.java, java/Blkio.java, java/Db.java,
	java/Del.java, java/Ent.java, java/Ents.java, java/Han.java,
	java/Handle.java, java/Pkt.java, java/Prev.java, java/Scan.java,
	java/Seg.java, java/Stats.java, java/Test.java, java/Wbdefs.java:
	Colon is now translated to an underscore, and the letter next to
	colon in the scheme input file is capitalized.

2007-01-22  Aubrey Jaffer  <agj@alum.mit.edu>

	* scm2java: Updated copyright; added reference to schlep.

	* java/Lck.java, java/Wbsys.java: Cleaned whitespace and indentation.

2007-01-21  Aubrey Jaffer  <agj@alum.mit.edu>

	* java/Seg.java, java/Wbsys.java, java/Han.java, java/Lck.java,
	java/Pkt.java, java/Blk.java, java/BooleanMethods.java,
	java/Db.java, java/Ent.java: Added copyright and license.

	* wbcheck.c, wbdefs.scm, wbsys.c, wbsys.h, wbsys.scm, wbview,
	Makefile, README, VMSBUILD.COM, make.scm, prev.scm, scan.scm,
	stats.scm, test.scm, test2.scm, blink.scm, blkio.scm, db.c,
	db.scm, del.scm, ents.scm, example.scm, handle.scm, all.scm,
	handle.c, scan.c, wbdefs.h:
	Changed SCM license exception to WB exception.

2007-01-19  Ravi kiran Gorrepati

	* java/Wbsys.java: Added time.

2007-01-19  Aubrey Jaffer  <agj@alum.mit.edu>

	* java/Blink.java, java/Blkio.java, java/Del.java, java/Ent.java,
	java/Ents.java, java/Handle.java, java/Prev.java, java/Scan.java,
	java/Seg.java, java/Stats.java, java/Wbdefs.java:
	Prefix module names.

	* scm2java (javafy-string): Don't strip prefix:.

	* wbsys.scm, blink.scm (PKT:PACK!): Corrected spelling.

	* wbsys.h (pkt_pack): Corrected spelling.

2007-01-18  Aubrey Jaffer  <agj@alum.mit.edu>

	* scm2java (*package-name*): Set from "scm2java.typ".
	(declare-name!, declarations-report!, vartype): Fixed declaration
	reporting.

	* scm2java.typ: Added (*package-name* "wb").

	* Makefile (jall): Now makes java/wb.jar.
	(jcheck): Added target which runs 'make check' in java/ directory.

2007-01-17  Aubrey Jaffer  <agj@alum.mit.edu>

	* db.c, ents.c, handle.c, scan.c, scan.h (bt_scan):
	Renamed from scan_bt_scan.

	* handle.scm, scan.scm, test2.scm, db.scm, ents.scm (bt-scan):
	Renamed from scan:bt-scan.

	* java/Db.java: Cleaned whitespace.

	* jarfiles, javafiles, make_jar, make_run_jwb:
	Functions moved into java/Makefile.

	* java/Makefile (check): Changed order of tests.

	* all.scm: Call MAIN and RMAIN.

	* test.scm: Moved call to MAIN to "all.scm".

	* Makefile (check): Added target to run test.scm and example.scm.
	(afiles): Added java files in java/ subdirectory.

	* java/Makefile (check): Added target; cleaned up.

2007-01-15  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (sjfiles): Derived java files now in java subdirectory.

	* scm2java (scm2java): Last argument is destination directory if
	trailing / or \.

2007-01-12  Aubrey Jaffer  <agj@alum.mit.edu>

	* scm2java (declare-names!, declare-name!)
	(read-local-declarations, vartype): Declarations now glob
	matching.

2006-12-29  Aubrey Jaffer  <agj@alum.mit.edu>

	* schlep (schlep-exp): Termin was missing after inexact literals.

2006-12-22  Ravi kiran Gorrepati

	* java/Example.java, java/Seg.java: *** empty log message ***

	* blink.c, example.scm, handle.c, handle.scm, java/Db.java, java/Ent.java, java/Example.java, java/Pkt.java, java/Seg.java, scm2java:
	Added Example.java, which is example.scm in Java. In makeSeg, changed
	second argument to closeSeg to (not #t) from #f.

	* ChangeLog: *** empty log message ***

	* wb.info (close-seg): Second argument is boolean.

	* wbsys.scm (j-zero): Removed.

	* handle.c, handle.scm: SEG:USED now always an integer.

	* prev.c, prev.scm (prev:find-prev-ent):
	Call to switch-ent was using #f instead of
	ACCNONE.

	* handle.scm, handle.c (bt-rem-range):
	PKT:SKEY-COUNT was uninitialized.

	* ents.c, ents.scm (ents:ent-update-access?): Improved error message.

	* db.scm (wb:err?, db:put!, db:get): Added.

	* handle.c, handle.h (hammer?):
	Renamed argument to close-seg to be boolean.

	* blink.c, ents.c, prev.c: *** empty log message ***

	* prev.scm (prev:prev-k-ent): Fixed editing lossage.

	* ents.scm, wbsys.scm (j-one): No longer needed; removed.

	* handle.scm (hammer?): Renamed argument to close-seg to be boolean.

2006-12-22  Aubrey Jaffer  <agj@alum.mit.edu>

	* wb.info (close-seg): Second argument is boolean.

	* wbsys.scm (j-zero): Removed.

	* handle.scm: SEG:USED now always an integer.

	* prev.scm (prev:find-prev-ent): Call to switch-ent was using #f
	instead of ACCNONE.

	* handle.scm (bt-rem-range): PKT:SKEY-COUNT was uninitialized.

	* ents.scm (ents:ent-update-access?): Improved error message.

2006-12-21  Ravi kiran Gorrepati

	* Makefile, blink.c, blink.h, blink.scm, blkio.c, blkio.h,
	blkio.scm, del.c, del.h, del.scm, ents.c, ents.scm, handle.c,
	handle.h, handle.scm, java/Db.java, java/Wbsys.java, prev.c,
	prev.scm, scan.c, scan.scm, scm2java, scm2java.typ, wbsys.h,
	wbsys.scm: The Java code is now translated from scm without
	syntactic errors.

2006-12-13  Ravi kiran Gorrepati

	* blink.scm, del.scm, ents.scm, java/Blk.java,
	java/BooleanMethods.java, java/Db.java, java/Ent.java,
	java/Han.java, java/Lck.java, java/Seg.java, java/Wbsys.java,
	prev.scm, scm2java, scm2java.typ:
	A bunch of bug fixes -
	1. All longs are now ints, because only 4 bytes were used in a
	  long.
	2. All labels now come with loops
	3. Added checkLcks
	4. Previously, for some methods which contain labels, the bodies
	 were incompletely generated. Fixed that.
	5. Modified some constructs in scm, for which proper java code is
	  not generated. (the body in begin construct translated to
	  statements seperated by commas - replaced begin with and)
	6. Several other small bugs.
	* prev.c, ents.h, ents.c, del.h, del.c, blink.c: Boolean returning
	functions and variables postfixed with _P.

2006-12-07  Aubrey Jaffer  <agj@alum.mit.edu>

	* scm2java (outbinding): stringToBytes byte-array literal strings.

	* handle.scm, ents.scm: Replaced literal strings with compile-time
	byte-array constants.

	* wbdefs.scm (NO-byts, ROOT-byts, BSIZ-byts, USED-byts, FLD-byts)
	(FLC-byts): Added to replace literal strings.

	* scm2java.typ ("byts" (array byte)): Added.

2006-12-06  Aubrey Jaffer  <agj@alum.mit.edu>

	* prev.c, prev.h, prev.scm, blink.scm, del.c, del.scm, ents.c,
	ents.scm, blink.c, blink.h: Changed variable "access" to
	"accmode".

	* wbdefs.scm, ents.scm, handle.c, handle.scm, prev.scm, scan.scm,
	stats.scm, wbcheck.c, blkio.c, blkio.h, blkio.scm, del.scm,
	blink.scm: Cleaned whitespace.

	* Makefile (postnews): Removed.

2006-12-05  Ravi Gorrepati

	* blkio.scm, handle.scm, java/BooleanMethods.java, java/Seg.java,
	java/Wbsys.java, scan.scm, scm2java.typ: Just a couple of small
	bug fixes.

2006-12-04  Aubrey Jaffer  <agj@alum.mit.edu>

	* wbview (wbview): Display null association is present.

	* *.scm, *.c, *.h: Use ACCNONE instead of #f.

	* wbsys.c (ent_make_ent): Initial ACC value is ACCNONE.

	* wbsys.scm (ENT:MAKE-ENT): Initial ACC value is ACCNONE.

	* wbdefs.scm (ACCNONE): Added; use instead of #f.

2006-11-30  Aubrey Jaffer  <agj@alum.mit.edu>

	* wbview (wbview): Start dump at "^@", not "" (infinite loop).

2006-11-29  Ravi Gorrepati

	* .cvsignore, blink.scm, blkio.scm, del.scm, ents.scm, handle.scm,
	java/Blk.java, java/BooleanMethods.java, java/Db.java,
	java/Ent.java, java/Han.java, java/Pkt.java, java/Seg.java,
	java/Wbsys.java, prev.scm, scan.scm, scm2java, stats.scm,
	wbdefs.scm, wbview: Using import static inlieu of extending
	classes. Using reflection for function pointers.

2006-11-24  Aubrey Jaffer  <agj@alum.mit.edu>

	* wbdefs.scm: #+SCM2JAVA was reading through Schmooz comment.

2006-11-21  Aubrey Jaffer  <agj@alum.mit.edu>

	* scm2java (javafy-string): Translate "->" to "To".
	(scm2java-exp): Fixed unsigned byte treatments.

	* schlep (c-ify-string): Translate "->" to "_to_" in symbols.

2006-11-20  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (srcdir.mk): Moved up to detect changes to SCHLEP.

2006-11-15  Aubrey Jaffer  <agj@alum.mit.edu>

	* wbdefs.scm (FLC-LEN): Reduced to minimum.

2006-11-14  Aubrey Jaffer  <agj@alum.mit.edu>

	* wbview (wbview): Show all associations.

2006-11-13  Ravi Gorrepati

	* ents.scm, java/wbsys.java, scm2java, stats.scm, wbdefs.scm:
	Corrected a bunch of translation errors, the main things being,
	correct translation of array definitions and boolean arguments in
	control structures.

2006-11-10  Ravi Gorrepati

	* java/Seg.java: Corrected the method definitions.

2006-11-09  Ravi Gorrepati

	* scm2java: Fixed array declarations.

	* del.scm, handle.c, handle.scm, prev.c, prev.scm, scan.c,
	scan.scm, blink.c, blink.scm, del.c: ents: name changes prompted
	by filename change for Java.

	* scm2java, todo_scm2java.pdf, todo_scm2java.tex:
	Removed the todo list.

2006-11-09  Aubrey Jaffer  <agj@alum.mit.edu>

	* ents.scm (ents:ent-write, ents:ent-update-access, ent-copy!)
	(blk-free): Renamed for filename change.

2006-11-08  Aubrey Jaffer  <agj@alum.mit.edu>

	* scm2java (scm2java-let): Setup while for continue goto.
	(scm2java-exp): Return from all termin=RETURN.
	(scm2java-exp): Translate #f to null for non-boolean use.

	* wbsys.scm, wbsys.h (pkt*): Moved from wbdefs.scm.

	* blink.scm (chain-put): Renamed result to result?.

	* ents.scm: Renamed from ent.scm.

	* scm2java (*emitted-class-declaration*): Fixed missing class line
	for non-extends classes.

2006-11-03  Aubrey Jaffer  <agj@alum.mit.edu>

	* scm2java (outtype-aux): Fixed position of [] in declarations.
	(scm2java-top): Fixed self-defconsts.

2006-11-02  Aubrey Jaffer  <agj@alum.mit.edu>

	* wbsys.scm (BLK): Moved here.

	* wbdefs.scm (BLK): Moved to wbsys.

	* prev.scm: Prefixed exports.

	* ent.scm (amnesia-ent!): Moved here.

	* del.scm (del:delete-blk): Renamed from blk:delete.

	* blkio.scm: Changed from blk prefix to blkio.

	* wbsys.scm (SEG:): Merged SEGD: functions into SEG: functions.

	* wbdefs.scm: (SEG:): Functions moved to wbsys.

	* handle.scm (open-seg): Change errout argument name.

2006-11-01  Aubrey Jaffer  <agj@alum.mit.edu>

	* handle.scm (seg-free?): Renamed from seg:free?.

	* scm2java (javafy-string): Turn ":" into "." and capitalize.

2006-10-31  Aubrey Jaffer  <agj@alum.mit.edu>

	* *.scm, *.c, *.h: Regularized PKT: constructors and accessors.

	* wbsys.scm (HAN:): Accessor prefix changed from HAN-.

	* wb.texi (Deferred writes of data blocks): Corrected WCB stuff.

	* blink.scm (chain-put): Inlined case #+SCM2JAVA.
	(select-split-fun): #-SCM2JAVA.

	* scm2java (scm2java-alloc): Fixed.
	(type->exptype): Stubbed.

	* scm2java.typ: Changed ptrs to arrays.

2006-10-30  Aubrey Jaffer  <agj@alum.mit.edu>

	* prev.scm (trace-on): Changed from conditional to #+TRACE-ON.

	* blink.scm (LEAF-SPLIT-KEY-STR): Bytes.

	* scm2java (scm2java1): Java documentation written to *.tjxi.

	* schlep (outtype-aux): Treat BYTES like VECTOR.

2006-10-27  Aubrey Jaffer  <agj@alum.mit.edu>

	* scm2java: Eliminated -h- functions; lots of other stuff.
	(scm2java-top): extends, not Extends.
	(scm2java-exp): true and false.
	(scm2java-exp): extra dprintf parentheses removed.

	* blink.scm, blkio.scm, db.scm, db.c, del.scm, ent.scm,
	handle.scm, prev.scm, stats.scm, wbcheck.c: Include wbdefs instead
	of wbsys.

	* scan.scm (scan:bt-scan): Renamed from BT-SCAN.

2006-10-26  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (sjfiles, SCM2JAVA, jall, *.java): Added.

	* scm2java.typ: Added type table for WB code.

	* scm2java: Added translator from SCM to Java.

	* blink.scm: Converted most strings to bytes.

2006-10-25  Aubrey Jaffer  <agj@alum.mit.edu>

	* db.scm (create-db): Handle int or char for argument `typ'.

	* wbsys.h (file_set_position): OSX needs #include <unistd.h>.
	(open_output_file): Replaced obsolete call creat() to open().

2006-10-24  Aubrey Jaffer  <agj@alum.mit.edu>

	* wbview (wbview): Give better message if open-seg failed.

2006-10-21  Aubrey Jaffer  <jaffer@aubrey.jaffer>

	* Makefile (VERSION): Bumped from 1c2 to 1c3.

2006-09-19  Aubrey Jaffer  <agj@alum.mit.edu>

	* blkio.c, blkio.scm, handle.c, handle.scm, wbsys.h: Renamed
	subbytes-read! and subbytes-write from substring-...

2006-08-18  Aubrey Jaffer  <agj@alum.mit.edu>

	* wbsys.h: Added support for __MINGW32__.

2006-08-10  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (dvi, pdf): New tetex-3.0(-20.FC5) broke them -- fixed.

2006-05-15  Aubrey Jaffer  <agj@alum.mit.edu>

	* wb.texi, wb.info: Converted to use @copying.
	Combined fn and tp indexes.
	(History): Moved homepage link here.

	* Makefile (docs): Added target to make all documentation files;
	then invoke xdvi.

2006-02-13  Aubrey Jaffer  <jaffer@aubrey>

	* Makefile (VERSION): Bumped from 1c1 to 1c2.

2006-01-15  Dai Inukai

	* wb.texi: Typo corrections.

2005-10-09  Aubrey Jaffer  <agj@alum.mit.edu>

	* schlep (schlep-exp): Handle (ASH <x> (- ...)) as clue that call
	shifts right.

2005-06-21  Aubrey Jaffer  <jaffer@aubrey>

	* Makefile (VERSION): Bumped from 1b1 to 1c1.

2005-03-18  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (install): Installscm also.
	(uninstall): Beefed up.

2004-10-26  Aubrey Jaffer  <agj@alum.mit.edu>

	* ent.scm, ent.c (init-wb, init_wb): Removed "Initializing wb1b1"
	messages.

2004-08-11  Aubrey Jaffer  <ajvz@voluntocracy.org>

	* rwb-isam.scm (wb-string->object): Fixed conversion directions.

2004-08-08  Aubrey Jaffer  <agj@alum.mit.edu>

	* stats.h, scan.h, prev.h, handle.h, ent.h, del.h, blkio.h,
	blink.h, Makefile: Schlep with the SCM prototype style.

	* wbview, wbsys.scm, wbsys.h, wbsys.c, wbdefs.scm, wbdefs.h,
	wbcheck.c, test2.scm, test.scm, stats.scm, stats.h, stats.c,
	scan.scm, scan.h, scan.c, prev.scm, prev.h, prev.c, make.scm,
	handle.scm, handle.h, handle.c, example.scm, ent.scm, ent.h,
	ent.c, del.scm, del.h, del.c, db.scm, db.c, blkio.scm, blkio.h,
	blkio.c, blink.scm, blink.h, blink.c, all.scm, VMSBUILD.COM,
	README, Makefile: Changed GUILE -> SCM in license exception.

	* schlep (prototype-style): Added; also SCM-mode prototypes.
	(schlep.script): Added command-line options for proto-style.

2004-05-20  Aubrey Jaffer  <agj@alum.mit.edu>

	* wb.texi, wb.spec, wb.info (swiss.csail.mit.edu):
	Renamed from swissnet.ai.mit.edu.

2004-03-08  Aubrey Jaffer  <agj@alum.mit.edu>

	* blink.c, del.c, ent.c, handle.c, prev.c, scan.c, stats.c,
	wbdefs.h: schlep output whitespace changes

2004-03-07  Aubrey Jaffer  <agj@alum.mit.edu>

	* schlep (c-ify-string): Pass-through "." in symbol names.
	(schlep-exp): Added CURRENT-ERROR-PORT, CURRENT-OUTPUT-PORT,
	CURRENT-INPUT-PORT.

2004-03-04  Aubrey Jaffer  <agj@alum.mit.edu>

	* schlep (out): Insert space to break up 5--1.

2004-01-31  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (LDSO): Abstract ld for loadable module.
	(wbcheck): Was missing -lc.
	(clean, distclean): Remove object files.

2004-01-14  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (srcdir.mk): Include after target.
	Separated shell assignments and exports.

2003-12-07  Aubrey Jaffer  <agj@alum.mit.edu>

	* db.c (buff): Removed shared global buff.
	(lbt_get, lbt_next, lbt_prev, lbt_read): buff now local.
	(lbt_rem_star): Local tmpstr was being initialized, but not used.

2003-12-02  Aubrey Jaffer  <agj@alum.mit.edu>

	* rwb-isam.scm (make-getter): Return #f when record not found.

2003-11-30  Aubrey Jaffer  <jaffer@scm.jaffer>

	* Makefile (VERSION): Bumped from 1a8 to 1b1.

2003-11-29  Aubrey Jaffer  <agj@alum.mit.edu>

	* handle.scm (check-seg?): Check for "wb" @ byte 23.
	(check-seg?): Fail gracefully if first 12.B not 0.
	(open-seg): recycle-ent! called from errout.

2003-11-03  Aubrey Jaffer  <agj@alum.mit.edu>

	* wb.texi (Longer Value Fields): Updated.
	(Record Operations): Documented db:put! and db:get.

	* db.c (db:put!, db:get): Added; implements values up to
	254*255.B long.

	* rwb-isam.scm (db:get, db:put!): Use longer value functions.

2003-11-02  Aubrey Jaffer  <agj@alum.mit.edu>

	* wb.texi (Block Format): Added description.

	* rwb-isam.scm (key:match-prefix?): Replaces key:first-col?,
	key:last-col?.

2003-11-01  Aubrey Jaffer  <agj@alum.mit.edu>

	* rwb-isam.scm, wbtab.scm: (map-key): Corrected list order.
	Replaced base-id type with ordinal.

2003-10-31  Aubrey Jaffer  <agj@alum.mit.edu>

	* rwb-isam.scm (make-prever, make-nexter): Added index arugment.

	* wbtab.scm (make-base): Added "base-table" association.
	Removed "wb:" prefix from internal names.

2003-10-30  Aubrey Jaffer  <agj@alum.mit.edu>

	* wb.texi (Relational Databases): Added documentation of wb-table
	and rwb-isam.

	* rwb-isam.scm (key:last-col?): Added.
	(make-nexter, make-prever): Added ISAM primitives.

2003-10-29  Aubrey Jaffer  <agj@alum.mit.edu>

	* rwb-isam.scm (wb:ordered-for-each-key): Use bt:next instead of
	bt:scan for multi-column-value tables.
	Removed "wb:" prefix from internal names.

2003-10-28  Aubrey Jaffer  <agj@alum.mit.edu>

	* rwb-isam.scm (wb:make-getter-1): Added new method retrieving
	single non-key field.
	(key:first-col?): Abstracted encoding-dependent stuff from
	WB:ORDERED-FOR-EACH-KEY.
	(key:col-field): Changed to single-byte code (limit 254 fields).

2003-10-27  Aubrey Jaffer  <agj@alum.mit.edu>

	* rwb-isam.scm (wb:make-base): Added "base-table" association.

	* wbview (scramble): Autosense endianess.
	(dspl-char): Display equivalents for non-printing characters.

2003-10-26  Aubrey Jaffer  <agj@alum.mit.edu>

	* rwb-isam.scm (wb:col-field): Use k30 column encoding to debug.

	* wbtab.scm (wb:col-field): Documented field number encoding.

2003-10-25  Aubrey Jaffer  <agj@alum.mit.edu>

	* rwb-isam.scm: Implements SLIB relational databases with fixed
	and floating numerical and lexicographic key collations.

	* wbview: Program for viewing low-level WB database associations.

	* wbtab.scm (wb-seg:files, wb-seg:roots, wb-seg:mut?s)
	(wb-seg:locks): Changed to DEFVAR to support multiple WB
	base-table formats.
	(wb:butnthcdr): Fixed short-list bug.

2003-10-24  Aubrey Jaffer  <agj@alum.mit.edu>

	* wbtab.scm (k30): Renamed and documented key encoding.
	(k30-width): abstracted from wb:make-key-extractor and
	wb:make-key->list.
	(number-keyifier): Renamed from wb:encode-number.
	(wb:make-putter, wb:make-getter): Improved error reporting.
	(c64, c32, r64, r32, s64, s32, s16, s8, u64, u32, u16, u8): Added
	binary numbers to supported-types for values.
	(wb:make-keyifier-1, wb-string->object): #t is not an atom.

2003-10-18  Aubrey Jaffer  <agj@alum.mit.edu>

	* wbtab.scm: Reorganized and documented.

	* Makefile (CFLAGS): -fpic not needed?

	* db.c (wb_err_P, wb:num-segs): Moved from wbtab.scm.

2003-10-17  Aubrey Jaffer  <agj@alum.mit.edu>

	* blkio.scm (extend-file, blk:write, blk:read): Now use
	substring-read! and substring-write.

	* wbsys.scm (write-string, read-string): Removed in favor of
	new slib/byte functions.

	* wbsys.h (substring_write, substring_read): New slib/byte
	functions replace read_bytes and write_bytes.

	* Makefile (version.txi): Regenerate only for "make new".

	* blink.scm: Byte-ized.  Fixed printf() formats per gcc.

	* scan.scm (bt-scan): Changed key* arguments to kstr* for Schlep.
	byte-ized.

	* stats.scm: Fixed printf() formats per gcc.

	* wbcheck.c (read_block): Moved to squelch warning.

	* schlep.typ: "key" removed; caused mistyping.

	* wbtab.scm: Partially byte-ized.

	* schlep (schlep-exp): Handle MAKE-BYTES.

2003-10-16  Aubrey Jaffer  <agj@alum.mit.edu>

	* ent.c (init_wb): Fixed schlep bug allocating uninitialized
	arrays.

	* schlep (schlep-alloc): Fixed initv handling.

2003-10-04  Aubrey Jaffer  <agj@alum.mit.edu>

	* schlep (careful-for-each): Handle dotted arglists.

2003-09-30  Aubrey Jaffer  <agj@alum.mit.edu>

	* schlep (schlep-top): Ignore REQUIRE-IF.
	(schlep-alloc): Consolidated malloc/calloc code.

2003-09-23  Aubrey Jaffer  <agj@alum.mit.edu>

	* test.scm (test-128): Renamed from test.

	* Makefile (libwb.so, wbscm.so): gcc --> $(CC).
	(db, wbcheck): $(CC) --> $(LD).

2003-07-24  Aubrey Jaffer  <agj@alum.mit.edu>

	* schlep: Moved REQUIREs to top; REQUIRE 'STRING-CASE was missing.

	* wbsys.c: Either include or define errno.

	* wbsys.h (<errno.h>): included elsewhere.

2003-07-16  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (release): make wb.pdf.

2003-07-06  Jonathan Finger

	* wb.texi (Unlimited Length Keys and Values): Added section.

2003-07-05  Aubrey Jaffer  <agj@alum.mit.edu>

	* wbdefs.scm (WCB:SAP?, WCB:SAR?, WCB:SAC?, WCB:FAC?): Use
	logtest.

	* wbsys.h (close_port): Defined.

	* blkio.scm (blk:file-close): close-port replaces close-io-port.

	* test2.scm, test.scm, stats.scm, scan.scm, prev.scm, del.scm,
	blink.scm: LOAD replaces REQUIRE of files.

	* handle.scm (make-seg): Added description of BSIZ.

2003-07-04  Aubrey Jaffer  <agj@alum.mit.edu>

	* wb.texi (Longer Value Fields): Added section about.

2003-06-22  Aubrey Jaffer  <jaffer@aubrey.jaffer>

	* Makefile (VERSION): Bumped from 1a7 to 1a8.

2003-05-28  Aubrey Jaffer  <agj@alum.mit.edu>

	* schlep (outtype-aux): Don't assume (cadr type) is symbol.

2003-01-13  Aubrey Jaffer  <agj@alum.mit.edu>

	* db.c: (ASRTER): SCM macro changed from ASSERT.

2002-12-06  Aubrey Jaffer  <agj@alum.mit.edu>

	* schlep (schlep-exp): STRING->NUMBER ==> atoi.
	(schlep-exp): Translate CREATE-ARRAY.

2002-11-16  Aubrey Jaffer  <agj@alum.mit.edu>

	* copyrights (copyrights.script): Take filenames from stdin if
	only argument is "-".
	(report-copyrights): Split from find-copyrights.
	(find-copyrights): Tuned and improved.

2002-05-12  Aubrey Jaffer  <agj@alum.mit.edu>

	* schlep (schlep-exp): Handle quoted vectors.

2002-02-11  Aubrey Jaffer  <jaffer@aubrey.jaffer>

	* Makefile (VERSION): Bumped from 1a6 to 1a7.

2002-02-10  Aubrey Jaffer  <agj@alum.mit.edu>

	* schlep: Updated copyright and terms.
	(Scope of the Scheme Subset): Added section.
	(compile, compileh): Removed legacy aliases.

2002-01-31  Aubrey Jaffer  <agj@alum.mit.edu>

	* wbsys.scm (write-string, read-string): Changed uniform-vector-*
	calls to uniform-array-*.

2001-11-15  Aubrey Jaffer  <agj@alum.mit.edu>

	* wbtab.scm (*base-table-implementations*): Added support for SLIB
	db file-type detection.

2001-05-22  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (rpm): Don't depend on $(dest)wb$(VERSION).zip.

2001-05-16  Aubrey Jaffer  <agj@alum.mit.edu>

	* Makefile (pdf): Added targets.

Sun Mar 18 14:11:32 EST 2001  Aubrey Jaffer  <jaffer@aubrey.jaffer>

	* Makefile (VERSION): Bumped from 1a5 to 1a6.

2001-03-18  Aubrey Jaffer  <agj@alum.mit.edu>

	* wb.spec: Added RPM distributions.

2001-03-17  Aubrey Jaffer  <agj@alum.mit.edu>

	* wbcheck.c: Name changed from dbcheck.c.

2001-02-03  Aubrey Jaffer  <agj@alum.mit.edu>

	* wbtab.scm (wb:delete): Was not deleting whole record.

2000-07-04  Aubrey Jaffer  <aubrey_jaffer@splashtech.com>

	* VMSBUILD.COM: Updated for wbsys name change.

2000-06-11  Aubrey Jaffer  <aubrey_jaffer@splashtech.com>

	* Makefile (afiles): Include derived C files in distribution.
	(*.c *.h *.txi): Removed SCHLEP dependency.

	* wb.texi (Installation): Added.

2000-06-04  Aubrey Jaffer  <jaffer@ai.mit.edu>

	* wbtab.scm (wb:map-key): Call wb:ordered-for-each-key.
	(wb:ordered-for-each-key): Filter matches with match-keys.

2000-04-22  Aubrey Jaffer  <jaffer@ai.mit.edu>

	* wbtab.scm (ordered-for-each-key, map-key, for-each-key,
	delete*): Added primary-limit and column-type-list to arguments.
	Added NUMBER to supported data types.

	* wb.texi (Overview): Enlarged and improved.
	(Definitions): Added prefix and suffix compressions.

	* wbdefs, wbsys: Renamed from defs and sys.

2000-03-29  Aubrey Jaffer  <jaffer@ai.mit.edu>

	* defs.scm (SUCCESS): Changed to defconst.

	* TBD, Design.doc, dbscm.doc: Incorporated into wb.texi and
	removed.

2000-03-22  Radey Shouman  <Radey_Shouman@splashtech.com>

	* schlep (outtype-aux): Make sure to include a space between type
	and name, otherwise the TeX variable index can be trashed.

2000-02-15  Radey Shouman  <Radey_Shouman@splashtech.com>

	* schlep: Defmacros now may now be defined as
	(defmacro (name	. args) ...), and use destructuring-bind.

	(procedure->schlep-defmacro): Added, used to define EDPRINTF and
	WDPRINTF as defmacros.

	* schlep: Extend PRAGMA.[CH] to non-top-level uses.

2000-01-28  Aubrey Jaffer  <aubrey_jaffer@splashtech.com>

	* schlep (do-pragma): Fixed to use (OUT 0).

2000-01-26  Aubrey Jaffer  <jaffer@mit-ai>

	* huml (strip-markups): Replace <[/]DIV> with newline.
	(strip-markups): Only strip Content-Transfer-Encoding for HTML.
	(read-line-=): Made tail-recursive.

2000-01-25  Aubrey Jaffer  <jaffer@mit-ai>

	* schlep (schlep1): Eliminated less-portable FILE-POSITION call.

2000-01-24  Aubrey Jaffer  <aubrey_jaffer@splashtech.com>

	* schlep (outtype-aux): Removed external types.

2000-01-24  Radey Shouman  <Radey_Shouman@splashtech.com>

	* schlep (outtype-aux): Always enclose types in {} for Texinfo, so
	separate strings for C and Texinfo need not be maintained.

2000-01-23  Aubrey Jaffer  <jaffer@ai.mit.edu>

	* make.scm: schlep is no longer REQUIREable.  Read location from
	srcdir.mk.

2000-01-22    <radey_shouman@splashtech.com>

	* Makefile: srcdir.mk rule now uses `type' rather than `which',
	since `which' provokes output from .cshrc under Solaris.

2000-01-22  Aubrey Jaffer  <jaffer@ai.mit.edu>

	* Makefile (defs.h): Use slick new schlep name deduction.

	* schlep (compile): Deduce compile vs. compileh from filename.

2000-01-21  Aubrey Jaffer  <aubrey_jaffer@splashtech.com>

	* schlep (read-local-suffixes): now called from compile.
	(compile1): print TYPTRANS-REPORT! to stdout.

2000-01-21  Radey Shouman  <Radey_Shouman@splashtech.com>

	* schlep (typtrans-report!): Added CUMULATIVE? argument, typtrans
	table now includes per-file and cumulative fields.

	* schlep (typtrans-report!): Use WRITE rather than DISPLAY in
	printing, suppress writing type entries with zero uses.

	* schlep.scm: removed to bin.

2000-01-20  Aubrey Jaffer  <jaffer@ai.mit.edu>

	* schlep.typ: Removed int declarations.

	* Makefile (*.txi): Added schlep.typ dependency.
	(sfiles): Added schlep.typ.

	* schlep.scm: Removed default suffix declarations.

2000-01-20  Radey Shouman  <Radey_Shouman@splashtech.com>

	* schlep.scm (vartype, declare-suffixes!, declare-suffix!):
	(compile1): Generalized suffix -> C type process.  Schlep programs
	may contain DECLARE-SUFFIXES directives, examples of which are
	generated by each compile in <name>-types.scm files.  Longer
	suffixes override shorter suffixes, recent declarations override
	earlier (with a warning message).  The effect of a
	DECLARE-SUFFIXES is limited to the local scope if not at top
	level.

	(read-local-suffixes): Default suffixes for a compile are read
	from "schlep.typ" in the same vicinity as the file being compiled.
	The contents of "schlep.typ" look like the CDR of a
	DECLARE-SUFFIXES form.  The default suffixes at load time are read
	from "schlep.typ" in (program-vicinity) for schlep.

	(outtype): Types may be strings, so any C type may be used.

2000-01-17  Aubrey Jaffer  <jaffer@ai.mit.edu>

	* sys.h (LCK, ENTRY, SEGD): Changed to typedef struct.

2000-01-14  Radey Shouman  <Radey_Shouman@splashtech.com>

	* schlep.scm (document-substitute): Downcase @cname arguments,
	unless they begin with ' (as in PROVIDED? arguments), in which
	case upcase them.

Thu Jan 13 23:15:43 EST 2000  Aubrey Jaffer  <jaffer@aubrey.jaffer>

	* Makefile (VERSION): Bumped from 1a4 to 1a5.

2000-01-12  Aubrey Jaffer  <jaffer@ai.mit.edu>

	* *.scm: Added .scm to filenames.  Replaced fprintfs with dprintf,
	wdprintf, and edprintf.

2000-01-11  Aubrey Jaffer  <aubrey_jaffer@splashtech.com>

	* schlep.scm (infix-compile-exp): Output long lists as blocks.
	(edprintf, wdprintf): Made LOUDER.

2000-01-10  Radey Shouman  <Radey_Shouman@splashtech.com>

	* schlep.scm (tailcalled-in-body?): Now understands internal
	DEFINE, AND, and OR.
	(include-defmacros): Now reads files for defmacros
	only in DEFMACRO:LOAD forms, rather than LOAD and REQUIRE.

2000-01-09  Aubrey Jaffer  <aubrey_jaffer@splashtech.com>

	* schlep.scm (compile1): Delete empty *.txi files.

2000-01-08  Radey Shouman  <Radey_Shouman@splashtech.com>

	* schlep.scm (schlep-read, compile1): Made separate *features*
	namespace for files being compiled by schlep, so that PROVIDE
	works reasonably with defmacros.  'schlep is no longer PROVIDEd by
	schlep.scm, except when actually reading input.

	(include-defmacros, compile-top, compileh-top): Recursively
	read REQUIREd or LOADed Scheme files in
	(PROGRAM-VICINITY) applying any DEFMACROs that are found.  In this
	way defmacros common to several files may be defined only once.

2000-01-06  Radey Shouman  <Radey_Shouman@splashtech.com>

	* schlep.scm (compile-if): Removed unnecessary restrictions on
	location PROVIDED? and DEFINED? forms.

	* schlep.scm (compile-if, compile-top-if, compile-to-sharp-if):
	Abstracted compilation to #if cpp statements.  Allow quoted
	argument in PROVIDED? forms.

2000-01-04  Aubrey Jaffer  <aubrey_jaffer@splashtech.com>

	* schlep.scm (compile-if): compiles DEFINED? and PROVIDED? as
	#ifdef.

2000-01-04  Radey Shouman  <Radey_Shouman@splashtech.com>

	* schlep.scm (compile-top-if): Changed handling of DEFINED? so
	that argument must be a string or symbol, which is c-ified.
	Because strings are allowed uppercase C identifiers may be used.

	(compile-top, do-defmacro):  Added defmacros.

1999-12-17  Radey Shouman  <Radey_Shouman@splashtech.com>

	* schlep.scm (compile-exp): Compile quoted symbols as C-ified
	strings.

	* schlep.scm (compile-case): Fixed to work with literal character
	datums.

1999-12-13  Radey Shouman  <Radey_Shouman@splashtech.com>

	* schlep.scm (outtype-doc): New, like outtype, but encloses types
	with embedded spaces in curly braces so texinfo indexing works
	properly.

1999-12-09  Aubrey Jaffer  <aubrey_jaffer@splashtech.com>

	* schlep.scm (compile-case): compile-exp unquoted data.

1999-10-20  Radey Shouman  <radey@cjlinux.colorage.net>

	* schlep.scm (vartype): Made more robust for fooPTR or fooTAB
	names.
	(compile-exp): Support for OFFSET-ARRAY added.
	(vartype): Made correct for the case of ARRAY or PTR
	types with names of length 4. Eg (vartype 'xptr) used to cause an
	error.

1999-10-18  Radey Shouman  <Radey_Shouman@splashtech.com>

	* schlep.scm (document-args->macros, document-substitute): Merge
	all argument lists from @defunx forms together when defining
	argument macros.  Warn if an argument macro other than @0 is
	ambiguous.

1999-10-15  Radey Shouman  <Radey_Shouman@splashtech.com>

	* schlep.scm (compile-exp): Fix to compile expressions returning
	multiargument > < ...
	(compile-cond): Warn if we seem to need an else clause.

1999-10-13  Radey Shouman  <Radey_Shouman@splashtech.com>

	* schlep.scm (compile-tops): Ignore trailing newlines when
	determining which definitions to group in documentation.

1999-10-08  Radey Shouman  <radey@cjlinux.colorage.net>

	* schlep.scm (compile1): Open files in tracked mode, so line
	numbers are kept.
	(where): Use PORT-LINE instead of LINE-NUMBER, since LINE-NUMBER only
	works while loading.

1999-09-22  Radey Shouman  <Radey_Shouman@splashtech.com>

	* schlep.scm (typtrans): offsets signed ints again.

1999-09-21  Radey Shouman  <Radey_Shouman@splashtech.com>

	* schlep.scm (tailcalled-in-body?): Now correct for named LET.

	* schlep.scm: Added definitions for PRAGMA.H and PRAGMA.C, to
	allow loading schlepable code after schlep.

	(tailcalled-in-body?, compile-top): Eliminate gcc
	warnings by generating a tail label in a function definition only
	if it will be used.

	* schlep.scm (compileh-top, compile-top, out-sharpdef): Map
	(PROVIDE ...) to #define.

1999-07-08  Radey Shouman  <Radey_Shouman@splashtech.com>

	* schlep.scm (typtrans): Added "apb" => array of byte, "aps" =>
	array of unsigned short.

1999-06-04  Aubrey Jaffer  <aubrey_jaffer@splashtech.com>

	* schlep.scm (go-script): Added.  Usable as batch script.

1999-05-17  Radey Shouman  <Radey_Shouman@splashtech.com>

	* schlep.scm (typtrans): Added 'chr' suffix for type char.

1999-01-21  Aubrey Jaffer  <aubrey_jaffer@splashtech.com>

	* schlep.scm (read-version): added.  Call with "version.txi".
	(compile-top): (error ...) ==> #error ...
	(typtrans): "ing" suffix needs to be integer.

1998-05-26  Aubrey Jaffer  <jaffer@colorage.com>

	* schlep.scm: BIT-FIELD now maps to the bit_field #define macro.

	* schlep.scm (compile-exp): Added BIT-FIELD aliase for BIT-EXTRACT.

1998-05-12  Aubrey Jaffer  <jaffer@colorage.com>

	* schlep.scm, cdls.scm: defconst definition made conditional; (scm
	now defines).  memocase -> casev

1998-05-07  Aubrey Jaffer  <jaffer@colorage.com>

	* schlep.scm, nvs.scm, lcdecode.scm: Changed (schlep) type of
	variables ending with "ddr" to `dword'.

1998-05-01  radey  <radey@scm.colorage.net>

	* schlep.scm: Modified compile-exp to accept MEMOCASE as a
	synonmym for extended CASE.

	Modified compile-case to accept UNQUOTEd symbolic constants as
	data at the head of each clause.  The programmer is responsible
	for making sure these are the names of appropriate constants.

1998-04-14  Aubrey Jaffer  <jaffer@colorage.com>

	* schlep.scm: c-ify-char need one more \ => ((#\\) "\\\\")

1998-04-03  Aubrey Jaffer  <jaffer@colorage.com>

	* schlep.scm: fixed outletbindings' treatment of var-involved.

	* schlep.scm: fixed do indentation

1998-04-02  Aubrey Jaffer  <jaffer@colorage.com>

	* schlep.scm: fixed order of assignment of temporaries in
	outletbinding.

	* schlep.scm: Corrected compilation of unary `-'

1998-04-01  Aubrey Jaffer  <jaffer@colorage.com>

	* schlep.scm: added support for floating-point constants.

1998-03-27  radey  <radey@scm.colorage.net>

	* schlep.scm: Output Texinfo comments to .c files instead of .h files.

	* schlep.scm: Allowed for macro substitution in Texinfo comments
	copied to generated C source files.

	* schlep.scm: Transcribe Texinfo comments to C source.  @dfn now
	causes a @cindex directive to be put in Texinfo output.  FLUID-LET
	now required.

	* schlep.scm: Fixed @cname Texinfo macro expansion.

1998-03-20  Aubrey Jaffer  <jaffer@colorage.com>

	* schlep.scm: Added BYTES

1998-03-13  radey  <radey@scm.colorage.net>

	* schlep.scm: Formal arguments in function documentation were not
	being c-ified.

1998-03-10  radey  <radey@scm.colorage.net>

	* schlep.scm: Fixed formatting of macro documentation

	* schlep.scm: Fixed category for macros documented with @defvrx.
	Added @cname macro to c-ify names in documentation.

	* schlep.scm: Blank lines in Texinfo comments now translated to
	`@sp 1' instead of literal blank lines.

1998-02-20  radey  <radey@scm.colorage.net>

	* schlep.scm: Multiple definitions of the same type separated only
	by newlines are now documented with @deftypefunx and friends.

1998-02-20  Aubrey Jaffer  <jaffer@colorage.com>

	* schlep.scm: Wrote more documentation.

1998-02-19  Aubrey Jaffer  <jaffer@colorage.com>

	* schlep.scm: fixed line-number problem

	* schlep.scm: changed .tx to .txi

1998-02-18  radey  <radey@scm.colorage.net>

	* schlep.scm: Fixed handling of BEGIN so that Texinfo
	documentation is associated with the first form in the BEGIN.

	* schlep.scm: bugfix for documentation functions.

1998-02-17  radey  <radey@scm.colorage.net>

	* schlep.scm: Implemented argument Texinfo macros: `@arg1' or `@1'
	expands to the first argument name wrapped in a @var{}. `@0' or
	`@arg0' expands to the function or variable name wrapped in a
	@code{}.

	`@text' now a synonym for `@body'.  The remainder of a @body line
	is incorporated into the definition body.  Documentation is
	generated whenever an @body line is found, even if no text to put
	in the documentation body is found.

	For lines beginning Texinfo comment sections, the `@' character is
	included in the output unless it is immediately followed by a
	semicolon or whitespace.

1998-02-12  radey  <radey@scm.colorage.net>

	* schlep.scm: Removed indentation in @def* bodies.  Made any ;@
	line other than ;@body start a TeXinfo comment.  Fixed newline
	generation between @end def* lines and non-body TeXinfo comments.

1998-02-11  radey  <radey@scm.colorage.net>

	* schlep.scm: Fixed formatting of argument lists in texi output,
	now all on one line.  Now outputs documentation only for functions
	with at least one "@body" line.

1998-02-11  radey  <radey@scm.colorage.net>

	* schlep.scm: Comment markup now directs comments to generated C
	source or Texinfo documentation.

	* schlep.scm: Generated texinfo files now suffixed by ".tx"
	instead of ".texi"

Sun Jun  8 21:45:59 1997  Aubrey Jaffer  <jaffer@martigny.ai.mit.edu>

	* schlep.scm: replaces comp.scm, with improvements added for other
	projects

Tue Mar 12 11:01:15 1996  Aubrey Jaffer  <jaffer@jacal.bertronics>

	* wbtab.scm: Added base-table implementation for SLIB relational
	databases.

Thu Mar 10 16:08:08 1994  Aubrey Jaffer  (jaffer@jacal)

	* db.c (flush-ents): added.

	* ent.scm ((ents-flush numtry numflush)): replaces flush-some-buks.
	(flush-ent-cntr): replaces flush-buk-cntr
	(flush-ent-lck): replaces flush-buk-lck

	* rel.scm: added.

Wed Mar  9 23:29:44 1994  Aubrey Jaffer  (jaffer@jacal)

	* ent.scm ((allocate-ent)): will retry a maximum of 20 times.

	* ent.scm ((release-ent! ent acctype)):
	((ent-update-access ent old-acctype new-acctype)): check
	clause for directory blocks now only for LEAF?s.

Mon Feb 21 16:04:19 1994  Aubrey Jaffer  (jaffer@jacal)

	* comp.scm ((compile1 file suffix)): In MSDOS only, puts routine
	at end of file which prints out its own address (for Jonathan).

Wed Feb 16 10:24:47 1994  Aubrey Jaffer  (jaffer@jacal)

	* all.scm: Uses provide and new slib:load-source.  Eliminates
	multiple loading of source files.

Wed Feb  2 22:33:34 1994  Aubrey Jaffer  (jaffer@jacal)

	* ent.scm (allocate-ent): no longer loops on failure.

	* db.c (init_db): features "wb" and "db" added.

	* dbcheck.c dbview.c: names changed from check and view to avoid
	conflict with other programs.

Wed Sep  8 13:13:13 1993    (jaffer at jacal)

	* wb1a2: released.

	* make.scm (make-blkio): added to control compiling of blkio.scm.

	* db.c (init_db): now does add_final(final_db) for compatability
	with scm4c3.

	* Makefile: gzip suffix changed to .gz

Tue Jun 29 16:22:15 1993  Aubrey Jaffer  (jaffer at wbtree)

	* wb1a1: released.

	* view.c: now automatically detects block size.

Mon Jun 28 16:01:06 1993    (jaffer at jacal)

	* db.c (final-db): calls final-wb.

	* ent.scm (init-wb final-wb): renamed from init-sys! and final-db.
	Init-wb returns number of ents allocated.

	* db.c (str2long long2str!): now defined for user in SCM.

Tue May  4 17:49:12 1993  Aubrey Jaffer  (jaffer at wbtree)

	* db.c example.scm test.scm test2.scm db.scm: prefixed Scheme bt
	operations names with "bt:".

	* db.c: removed rdss specific code.

Tue Apr 27 18:08:18 1993  Aubrey Jaffer  (jaffer at wbtree)

	* db.scm db.c (scan): now accepts #f instead of function.

	* scan.scm (bt-scan): now copies ent for COUNT-SCANs eliminating
	ACCREAD contention.  This allows nested SCANs and BTree refs in
	FUNC without contention.

Fri Apr 16 00:00:37 1993  Aubrey Jaffer  (jaffer at montreux)

	* example.scm: split out from db.doc.

	* defs.scm: REM-SCAN=-1, COUNT-SCAN=0, and MODIFY-SCAN=1.

Mon Apr 12 15:42:28 1993  Aubrey Jaffer  (jaffer at wbtree)

	* db.c db.scm (scan): implemented.

	* defs.scm ent.scm (ENT-TAB-INC): added for use by init-sys!.

	* comp.scm ent.scm (flc-fill flc-proc): changed long-tab to
	long-ara so storage would be temporary, rather than malloc()ed.

Thu Apr  8 17:12:40 1993  Aubrey Jaffer  (jaffer at wbtree)

	* Split blink into db and rdss.

Thu Mar 25 10:12:06 1993  Roland Zito-Wolfe  (rjz@wbtree)

	* fixed bug where FINAL didnt close segs properly

	* modified FLUSH-SOME-BUKS to scan for dirty blocks w/o
	  writing, if MAXNUM=0.

	* split FLUSH-SEG into FLUSH-BUFFER and PURGE-BUFFER
	** Fixed Problems with database closing

Tue Mar  9 10:08:46 1993  Aubrey Jaffer  (jaffer@wbtree)

	* handle.scm (bt-rem-range): removed last argument; now always -1.

Thu Mar  4 11:09:16 1993  Aubrey Jaffer  (jaffer@wbtree)

	** verified free-lists I/O reduced as expected,
	   and deferred data i/o works; extended STATS a little bit;
	** remove TMP-STR global string from DB

Thu Jan 21 1993 rjz

	* Design.doc: more of same; add descr of concurrency problems
	w/free list, error codes, misc, deferred data update proposal.

	* added deferred writes of data blocks

	* NOTE: there was a bug in CHAIN-PUT; it wasnt forcing
	  an ENT-WRITE of ENT in the XENT case! oops!

	* Implemented deferred leaf writes on data deletes

	* deferred writes on insert to free list (in handle?)

Fri Jan 15 1993 rjz

	* Design.doc: new deferred-tree-update algorithms

	* wrote down latest thoughts on delayed INDEX inserts and deletes,
	  the DELETE 2-write screw case, and when to retry deferred ops


Thu Jan  7 1993 rjz

	* added level-order check to FIND-ENT and FIND-PREV-ENT

	* added MATCH range generator [see NOTES in DOC and RANGE]

	* put global lock around empty-blk

	* put lock around FILL-FLC code to prevent FILL competition
	  [I put it around BOTH types of filling, ie, both filling
	   from the free list AND file extension.]

Thu Dec 16 rjz

	* Design.doc: misc editing

	* Design.doc: RANGE doc and extensions

	* split test code into 2 files, TEST and TEST2

Thu Dec 16 rjz (cumulative list of recent fixes)

	* impl read-only DB's

	* init time specification of size parameters.

	* fix FILL-FLC to use DELETE-SCAN

	* added MODIFY-SCANs to scan code

Tue Dec  8 13:34:57 1992  Aubrey Jaffer  (jaffer@sbux)

	* comp.scm (compile-exp): support for logical operations added.

Dec 1 1992 rjz

	* Design.doc: random elaborations and edits

	* scan.scm: fixed compares on OPERATION to use EQ? instead of =.

Thu Nov 19 17:33:26 1992  Aubrey Jaffer  (jaffer@sbux)

	* TBD: created.

	* created deferred update plan.

	* scan.scm: compiles and runs.

Nov 18 1992 rjz

	* Design.doc: recorded recent ananlysis of UPDATE screw and
	deferred updates

	* scan.scm: fixed bug where SCAN always used ACCWRITE (!oops!).
	Added MODIFY SCAN.

Nov 12 1992 rjz

	* scan.scm: merged DELETE and SCAN into one; changed FUNC calling
	protocol to copy value.

Oct 1992 rjz

	* Design.doc: reorganized and expanded

Thu Oct  8 15:29:13 1992  Aubrey Jaffer  (jaffer@sbux)

	* ent.scm (try-get-free-ent): now will rel-buk if no entry
	returned from select-idel-ent.

Thu Jun 18 14:32:38 1992  Aubrey Jaffer  (jaffer at train)

	* ent.scm (initload-flc! blk-free): initload-flc! created.
	blk-free calls it if needed.

	* del.scm handle.scm (chain-rem parent-delete-update bt-rem):
	release-ent! moved out of chain rem and into callers.

	* del.scm (BLK-DELETE): checks that ref-ct<2 before changing prev
	block's NXT pointer.  Deferred count now reflects failure to
	delete block.

	* blink.scm (chain-put!): retains name access on new block until
	parent-insert-update is complete.

	* blink.scm (next-nonempty-ent): changed get-ent ACCWRITE to
	ACCREAD and used ent-update-access.  Fixed nasty bug.

Mon Jun  8 18:09:09 1992  Aubrey Jaffer  (jaffer at PIXEL)

	* handle.scm (bt-write): created.

	* handle.scm blink.scm (chain-get): removed and put into bt-get.

	* blink.scm (chain-rem): now fills new arg ans-str if not #f.

Thu May 14 14:56:56 1992  Aubrey Jaffer  (jaffer at train)

	* ent.scm (ent-write): now does check-key-order!.

Tue May 12 14:47:30 1992  Aubrey Jaffer  (jaffer at train)

	* comp.scm: all longs are now unsigned.

	* handle.scm (bt-create bt-open): now set HAN-LAST.

	* ent.scm: Roy rewrote.

Thu May  7 13:25:38 1992  Aubrey Jaffer  (jaffer at train)

	* ent.scm (flc-fill): blks now allocated in numerical order.

	* sys.h sys.scm (root? end-of-chain?): moved here and do pointer
	funniness for efficiency.

	* db.c (create-db open-db): modified to use Jonathan's format for
	directory value entries.

Wed May  6 12:55:25 1992  Aubrey Jaffer  (jaffer at PIXEL)

	* stuff fixed.  Released to Jonathan.

	* defs.scm (next-field): moved from blink.scm so that it will
	compile as a macro.

	* blkio.scm(extend-file blk-write blk-read blk-file-close
	blk-file-open blk-file-create min-file-create): created.  All blk
	i/o goes through these routines.

From rjz@chaos.cs.brandeis.edu Tue Apr 28 12:38:57 1992
Return-Path: <rjz@chaos.cs.brandeis.edu>
Date: Fri, 24 Apr 92 13:00:51 -0400
From: "Roland Zito-Wolf" <rjz@chaos.cs.brandeis.edu>
To: jaffer@ai.mit.edu, rjz@chaos.cs.brandeis.edu
Subject: DATABASE

I made several modifications. The major items are:

1. adding some performance reporting
2. fixing parent-insert-update
3. Fixing CACHING special cases
4. Testing behavior with empty blocks and missing pointers
5. Found PREV bug (but Not fixed yet)

Detailed change inventory:

(items in parens are redos of stuff we did at last DMC session,
as i didnt have the current code)

ADDED SOME PERFORMANCE STATISTICS:
1. added stat code at front of BLINK (STATS, CSTATS, CLEAR-STATS)
2. added ctrs to BT-X, BLK-READ/WRITE, PUT, DELETE-BLK,
   GET-ENT, TRY-GET-ENT, cache-checking routines
2a. added CLEAR-STATS call to INIT-SYS!
3. added VALUE arg to ADD! also starting-value and increment, aka REMOVE!
5. Restored SHOW-BUFFERS to ENT (was SHOW-ACCESS!),
  improved output format, added flag to
  allow filtering out of reclaimed buffers, added abbreviation (SB).

UPDATE CODE:
14. rewrote PARENT-INSERT-UPDATE to be an atomic operation.
   sadly, a fair bit of the work falls onto CHAIN-PUT; perhaps once its
   working we can figure out a better structure?
   Fix has been tested wtih 200 ADDs; however, the screw cases where the
   NEXT-KEY is in a different block -- and worse, where there are intervening
   empty blocks -- HAVE NOT BEEN TESTED YET.
16. Added global var DEFER-INSERT-UPDATES to force deferral of parent-updates
   for testing other code (Everything seems to survive it except PREV (see #18)
17. Added global DEFER-BLOCK-DELETES to force deferral of block-reclamation.
   Running with it on does not seem to cause any malfunctions in NEXT or PREV.

MISC:
9. changed FPRINTF to take F format (precision arg doesnt work, though)
10. Extended PACKET structure (SCHEME only)
11. fixed BLK-FIND-POS to return location of PREVIOUS key (see #12)
12. fixed PREV code to use #11 to avoid redundant block scans
    (MORE TO BE DONE: Fix its CACHE code to do so also)
13. Moved orphaned  "as we go" comment in BLINK back to BLK-FIND-POS
15. Started writing a design notes file
20. Fixed CHAIN-NEXT and CHAIN-PUT to update HAN-LAST optimally
    (passed though the PACKET). Things still work; a quick test indicates
    its helpful for NEXT but for some reason the fix ISNT helping for PUTs --
    at least not in the test i ran. (see observation 6)

REDOS:
4. (put in the 1-line mod to CHAIN-FIND-PREV-ENT)
6. (added ENT-WRITE calls to DELET-BLK and PARENT-DEL-UPDATE. But see #8)
19. (moved SET-HAN-LAST call into CHAIN-FIND-ENT)

(NOT REDONE:
   - the changed i/o message format
   - buffer aging tweaks
   - anything else I coundn't recall)

BUGS:
7. CUTE BUG: RELEASE-ENT was writing over the age=128 that AMNESIA-ENT set,
  thus preventing their buffers from being reclaimed preferentially!!!
  (examples traces appear as OBS #5) In any case, the right thing to do is
  simply to splice the ENT out directly, then you dont have to
  waste time searching for it. (I believe you said you were doing this, so
  I'll leave it alone for now.)

8. CUTE BUG#2: cant put ENT-WRITE in PARENT-DELETE-UPDATE, because
CHAIN-REM releases the block; have to put it into CHAIN-REM instead!!
(I dont know how we did it last time; the probem only shows up
on index-level deletes; also, fix saves a block write.)

Thu Mar 26 13:31:20 1992  Aubrey Jaffer  (jaffer at train)

	* prev.scm (at-root-level?): now checks first to see if ROOT? blk.

Fri Mar 20 13:31:59 1992  Aubrey Jaffer  (jaffer at PIXEL)

	* ent.scm (free-blk!): now calls amnesia-ent!.

	* defs.h (amnesia-ent!): created.

	* ent.scm (get-ent): now does not read blk when given ACCWRITE.

	* ent.scm (flush-and-del-buffer): now checks that ent is not
	ACCWRITE or ACCPEND.

	* ent.scm (flush-buffer): removed.

	* defs.scm ent.scm (BLK-TYP?): created and used.

Thu Mar 19 15:34:14 1992  Aubrey Jaffer  (jaffer at train)

	* ent.scm (create-new-blk-ent): Backs out if flc-fill fails.

	* ent.scm (fill-flc!): now does one disk write to extend the file.
	fill-flc! ==> flc-fill and returns #t on success.  #f if no more
	disk available or bt-rem failed.  Prints out error message if no
	more disk space available.

Wed Mar 18 18:13:44 1992  Aubrey Jaffer  (jaffer at PIXEL)

	* blink.scm ent.scm (create-new-blk-ent fill-flc! free-blk!
	flush-flc!): move from blink.scm to ent.scm.  Now all use of
	ENT-ACC is in ent.scm.

Tue Mar 10 13:25:06 1992  Aubrey Jaffer  (jaffer at train)

	* handle.scm (bt-open bt-create): commented out call to
	(check-access!) because Jonathan keeps program entries locked.

STATUS: (prev) working ( for (test1) data); needslarger test
        index-split fixed (cant call INDEX-SPLIT before INIT-NEXT-BLK!)
add multiple filenames;  warning message if filename does not
  match database name.
allow blk sizes to be specified in superblock
FLUSH on CLOSE-SEG! needs to REMOVE the entries for the database
  closed from the entry table, as well as writing out the dirty entries
flush-buffers wrong.
add DELETE-ENT and freelist B-tree
fix TSCAN! to verify key squencing
